(this["webpackJsonpchat.socket.io"]=this["webpackJsonpchat.socket.io"]||[]).push([[0],{120:function(e,t){},125:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(8),r=n.n(s),o=(n(89),n(33)),i=(n(90),n(18)),l=n(71),u=n.n(l),m={socket:null,createConnection:function(){this.socket=u()("https://chat-server-io.herokuapp.com")},subscribe:function(e,t,n){var a,c,s;null===(a=this.socket)||void 0===a||a.on("init-messages-published",e),null===(c=this.socket)||void 0===c||c.on("new-message-sent",t),null===(s=this.socket)||void 0===s||s.on("user-typing",n)},sentName:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-name-sent",e)},sentMessage:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-message-sent",e)},clientType:function(){var e;null===(e=this.socket)||void 0===e||e.emit("client-typed")},destroyConnection:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect(),this.socket=null}},d=n(14),f=Object(d.b)("chat/create-socket",(function(e,t){m.createConnection(),m.subscribe((function(e){t.dispatch(E({messages:e}))}),(function(e){t.dispatch(k({message:e}))}),(function(e){t.dispatch(j({user:e}))}))})),p=Object(d.b)("chat/destroy-socket",(function(){m.destroyConnection()})),h=Object(d.b)("chat/sentName",(function(e){m.sentName(e.name)})),g=Object(d.b)("chat/clientTyping",(function(){return m.clientType()})),b=Object(d.b)("chat/sentMessage",(function(e){m.sentMessage(e.message)})),v=Object(d.c)({name:"chat",initialState:{messages:[],userType:[]},reducers:{messagesReceived:function(e,t){e.messages=t.payload.messages},newMessageReceived:function(e,t){e.messages.push(t.payload.message);var n=e.userType.findIndex((function(e){return e.id===t.payload.user.id}));-1!==n&&e.userType.splice(n,1)},userTyping:function(e,t){e.userType.push(t.payload.user)}}}),y=v.actions,E=y.messagesReceived,k=y.newMessageReceived,j=y.userTyping,O=v.reducer,w=n(161),T=n(157),x=n(165),N=n(162),B=n(160),C=n(163),M=n(150),S=n(154),R=n(155),W=n(156),I=n(75),D=n.n(I),J=function(e){var t=e.style;return c.a.createElement(M.a,{position:"static",className:t},c.a.createElement(S.a,null,c.a.createElement(R.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(D.a,null)),c.a.createElement(W.a,{variant:"h6",color:"inherit"},"socket.io")))},U=n(76),q=n(158),z=n(159),F=function(){var e=Object(i.c)((function(e){return e.chat.messages})),t=Object(i.c)((function(e){return e.chat.userType})),n=Object(a.useRef)(null),s=Object(a.useState)(""),r=Object(o.a)(s,2),l=r[0],u=r[1],m=Object(i.b)(),d=K();return Object(a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[e]),c.a.createElement(T.a,{item:!0,xs:12},c.a.createElement(U.a,{className:d.wrapper},c.a.createElement(q.a,{className:d.content},c.a.createElement(z.a,null,e.map((function(e,t){return c.a.createElement(W.a,{key:(new Date).getTime().toString()+t,className:d.messageBlock,variant:"subtitle2",gutterBottom:!0},c.a.createElement("b",null,e.user.name," "),": ",e.message)})),c.a.createElement("div",{ref:n}))),t.map((function(e){return c.a.createElement(W.a,{variant:"body2",className:d.typeUser},e.name," typing...")})),c.a.createElement(x.a,{fullWidth:!0,style:{flexDirection:"row"}},c.a.createElement(N.a,{variant:"filled",style:{flexGrow:1},onChange:function(e){return u(e.currentTarget.value)},value:l,onKeyPress:function(){m(g())}}),c.a.createElement(B.a,{color:"primary",onClick:function(){m(b({message:l})),u("")}},"send"))))};var G=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),l=Object(o.a)(r,2),u=l[0],m=l[1],d=K(),g=Object(i.b)();return Object(a.useEffect)((function(){return g(f()),function(){g(p())}}),[g]),c.a.createElement(c.a.Fragment,null,c.a.createElement(J,{style:d.root}),c.a.createElement(w.a,{maxWidth:"md"},c.a.createElement(T.a,{container:!0,justify:"center"},n?c.a.createElement(F,null):c.a.createElement(x.a,{variant:"outlined"},c.a.createElement(N.a,{label:"name",type:"text",value:u,required:!0,onChange:function(e){return m(e.currentTarget.value)}}),c.a.createElement(B.a,{size:"small",variant:"contained",color:"primary",onClick:function(){u.trim()&&(g(h({name:u})),s(!0),m(""))}},"sendName")))))},K=Object(C.a)({root:{marginBottom:"40px"},wrapper:{position:"relative"},content:{height:"50vh",overflowY:"auto",marginBottom:"30px"},messageBlock:{padding:"15px 5px",wordBreak:"break-all"},typeUser:{position:"absolute",bottom:"12%",left:"1%"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(12),V=n(30),Y=Object(P.c)({chat:O}),$=Object(d.a)({reducer:Y,middleware:function(e){return e().prepend(V.a)}});r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:$},c.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,n){e.exports=n(125)},89:function(e,t,n){},90:function(e,t,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.d88438ea.chunk.js.map