(this["webpackJsonpchat.socket.io"]=this["webpackJsonpchat.socket.io"]||[]).push([[0],{123:function(e,t){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),s=n.n(c),o=(n(92),n(33)),i=(n(93),n(17)),u=n(50),l=n(13),m=n(73),f=n.n(m),d={socket:null,createConnection:function(){this.socket=f()("https://chat-server-io.herokuapp.com")},subscribe:function(e,t,n,a){var r,c,s,o;null===(r=this.socket)||void 0===r||r.on("init-messages-published",e),null===(c=this.socket)||void 0===c||c.on("new-message-sent",t),null===(s=this.socket)||void 0===s||s.on("user-typing",n),null===(o=this.socket)||void 0===o||o.on("join-user",a)},sentName:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-name-sent",e)},sentMessage:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-message-sent",e)},clientType:function(){var e;null===(e=this.socket)||void 0===e||e.emit("client-typed")},destroyConnection:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect(),this.socket=null}},p={messages:[],userType:[],users:[]},g=n(164),v=n(160),b=n(168),h=n(165),y=n(163),E=n(166),j=n(153),k=n(157),O=n(158),w=n(159),T=n(77),x=n.n(T),B=function(e){var t=e.style;return r.a.createElement(j.a,{position:"static",className:t},r.a.createElement(k.a,null,r.a.createElement(O.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(x.a,null)),r.a.createElement(w.a,{variant:"h6",color:"inherit"},"socket.io")))},C=n(79),N=n(161),S=n(162),W=function(){var e=Object(i.c)((function(e){return e.chat.messages})),t=Object(i.c)((function(e){return e.chat.userType})),n=Object(a.useState)(""),c=Object(o.a)(n,2),s=c[0],u=c[1],l=Object(i.b)(),m=D();return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(C.a,{className:m.wrapper},r.a.createElement(N.a,{className:m.content},r.a.createElement(S.a,null,e.map((function(e,t){return r.a.createElement(w.a,{key:(new Date).getTime().toString()+t,className:m.messageBlock,variant:"subtitle2",gutterBottom:!0},r.a.createElement("b",null,e.user.name," "),": ",e.message)})))),t.map((function(e){return r.a.createElement(w.a,{variant:"body2",className:m.typeUser},e.name," typing...")})),r.a.createElement(b.a,{fullWidth:!0,style:{flexDirection:"row"}},r.a.createElement(h.a,{variant:"filled",style:{flexGrow:1},onChange:function(e){return u(e.currentTarget.value)},value:s,onKeyPress:function(){l((function(e){d.clientType()}))}}),r.a.createElement(y.a,{color:"primary",onClick:function(){var e;l((e=s,function(t){d.sentMessage(e)})),u("")}},"send"))))};var M=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),u=Object(o.a)(s,2),l=u[0],m=u[1],f=D(),p=Object(i.b)();return Object(a.useEffect)((function(){return p((function(e){d.createConnection(),d.subscribe((function(t){e(function(e){return{type:"messages-received",messages:e}}(t))}),(function(t){e(function(e){return{type:"message-received",message:e}}(t))}),(function(t){e(function(e){return{type:"user-typing",user:e}}(t))}),(function(t){e(function(e){return{type:"add-user",user:e}}(t))}))})),function(){p((function(e){d.destroyConnection()}))}}),[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{style:f.root}),r.a.createElement(g.a,{maxWidth:"md"},r.a.createElement(v.a,{container:!0,justify:"center"},n?r.a.createElement(W,null):r.a.createElement(b.a,{variant:"outlined"},r.a.createElement(h.a,{label:"name",type:"text",value:l,required:!0,onChange:function(e){return m(e.currentTarget.value)}}),r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",onClick:function(){l.trim()&&(p(function(e){return function(t){d.sentName(e)}}(l)),c(!0),m(""))}},"sendName")))))},D=Object(E.a)({root:{marginBottom:"40px"},wrapper:{position:"relative"},content:{height:"50vh",overflowY:"auto",marginBottom:"30px"},messageBlock:{padding:"15px 5px",wordBreak:"break-all"},typeUser:{position:"absolute",bottom:"12%",left:"1%"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(26),U=n(78),q=Object(J.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messages-received":return Object(l.a)(Object(l.a)({},e),{},{messages:t.messages});case"message-received":return Object(l.a)(Object(l.a)({},e),{},{messages:[].concat(Object(u.a)(e.messages),[t.message]),userType:e.userType.filter((function(e){return e.id!==t.message.user.id}))});case"user-typing":return Object(l.a)(Object(l.a)({},e),{},{userType:[].concat(Object(u.a)(e.userType.filter((function(e){return e.id!==t.user.id}))),[t.user])});case"add-user":return Object(l.a)(Object(l.a)({},e),{},{users:t.user});default:return e}}}),z=Object(J.d)(q,Object(J.a)(U.a));window.store=z,s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:z},r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(128)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.74a5b73e.chunk.js.map